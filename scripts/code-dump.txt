
# 4) Data in wide format (to test each policy position)

data_wide <- data_filtered %>%
  mutate(minimum_wage = coalesce(BGU_control1, BGU_Trumplib1, BGU_Trumpcon1, BGU_friendlib1, BGU_friendcon1),
         taxes = coalesce(BGU_control2, BGU_Trumplib2, BGU_Trumpcon2, BGU_friendlib2, BGU_friendcon2),
         abortion = coalesce(BGU_control3, BGU_Trumplib3, BGU_Trumpcon3, BGU_friendlib3, BGU_friendcon3),
         immigration = coalesce(BGU_control4, BGU_Trumplib4, BGU_Trumpcon4, BGU_friendlib4, BGU_friendcon4),
         guns = coalesce(BGU_control5, BGU_Trumplib5, BGU_Trumpcon5, BGU_friendlib5, BGU_friendcon5),
         health = coalesce(BGU_control6, BGU_Trumplib6, BGU_Trumpcon6, BGU_friendlib6, BGU_friendcon6),
         b_checks = coalesce(BGU_control7, BGU_Trumplib7, BGU_Trumpcon7, BGU_friendlib7, BGU_friendcon7),
         climate = coalesce(BGU_control8, BGU_Trumplib8, BGU_Trumpcon8, BGU_friendlib8, BGU_friendcon8),
         p_parent = coalesce(BGU_control9, BGU_Trumplib9, BGU_Trumpcon9, BGU_friendlib9, BGU_friendcon9))

### Convert the variables of interest to numeric
data_wide %<>%
  mutate(BGU_group = as.factor(BGU_group),
         BGU_group = factor(BGU_group, levels = c(1, 2, 3, 4, 5), 
                            labels = c("control", "TL", "TC", "CFL", "CFC")),
         minimum_wage = as.numeric(minimum_wage),
         taxes = as.numeric(taxes),
         abortion = as.numeric(abortion),
         immigration = as.numeric(immigration),
         guns = as.numeric(guns),
         health = as.numeric(health),
         b_checks = as.numeric(b_checks),
         climate = as.numeric(climate),
         p_parent = as.numeric(p_parent))

### Modify policy_opinion
# Following Barber & Pope, they code the policy positions as following:
# 1 support 0 don't know -1 oppose

# Example
table(data_wide$abortion)

data_wide %<>%
  mutate(minimum_wage = ifelse(minimum_wage == 9, 0, ifelse(minimum_wage == 2, -1, minimum_wage)),
         taxes = ifelse(taxes == 9, 0, ifelse(taxes == 2, -1, taxes)),
         abortion = ifelse(abortion == 9, 0, ifelse(abortion == 2, -1, abortion)),
         immigration = ifelse(immigration == 9, 0, ifelse(immigration == 2, -1, immigration)),
         guns = ifelse(guns == 9, 0, ifelse(guns == 2, -1, guns)),
         health = ifelse(health == 9, 0, ifelse(health == 2, -1, health)),
         b_checks = ifelse(b_checks == 9, 0, ifelse(b_checks == 2, -1, b_checks)),
         climate = ifelse(climate == 9, 0, ifelse(climate == 2, -1, climate)),
         p_parent = ifelse(p_parent == 9, 0, ifelse(p_parent == 2, -1, p_parent)))

table(data_wide$abortion)

# 5) Create interaction variables

